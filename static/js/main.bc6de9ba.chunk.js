(this["webpackJsonpreact-dashboard"]=this["webpackJsonpreact-dashboard"]||[]).push([[0],{154:function(e,t,a){e.exports=a(172)},159:function(e,t,a){},160:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},161:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=(a(159),a(160),a(161),a(44)),i=a(1),u=a(4);a(168);var s=function(e){var t=Object(u.b)(),a=Object(n.useState)([]),c=Object(i.a)(a,2),l=c[0],s=c[1],m=Object(n.useState)([]),f=Object(i.a)(m,2),d=f[0],p=f[1],v=Object(n.useState)(""),g=Object(i.a)(v,2),E=g[0],h=g[1],L=function(e){h(e),t({type:"SET_SELECTED_DECADE",payload:e});var a=l.filter((function(t){return t.Year===e}));if(a.length>0){var n=function(e,t){if(window.google){var a={center:new google.maps.LatLng(e,t),zoom:9,mapTypeId:google.maps.MapTypeId.ROADMAP};return new google.maps.Map(document.getElementById("gm-container"),a)}return null}(a[0].Lat,a[0].Long);n&&a.forEach((function(e){new google.maps.Marker({position:new google.maps.LatLng(e.Lat,e.Long),title:e["Asset Name"]+"-"+e["Business Category"]}).setMap(n)}))}};return Object(n.useEffect)((function(){fetch("sample_data.csv").then((function(e){return e.text()})).then((function(e){e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",a=e.slice(0,e.indexOf("\n")).trim().split(t);return e.slice(e.indexOf("\n")+1).split("\n").map((function(e){var t=[];return e.trim().replace(/^(".*"|.*),(.*),(.*),(.*),(.*),("\{.*\}"),(.*)/g,(function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];t=a.slice(1)})),a.reduce((function(e,a,n){return e[a]=t[n],e}),{})}))}(e),s(e),t({type:"SAVE_LOCATIONS",payload:e});var a=Object(o.a)(new Set(e.map((function(e){return e.Year}))));a=a.sort((function(e,t){return e-t})),p(a)}))}),[]),Object(n.useEffect)((function(){d.length>0&&!E&&L(d[0])}),[d]),r.a.createElement("div",{className:"marker-selection"},r.a.createElement("p",{className:"decade-selection"},"Decade selection: ",r.a.createElement("select",{value:E,onChange:function(e){return L(e.currentTarget.value)}},r.a.createElement("option",{value:""},"All"),null===d||void 0===d?void 0:d.map((function(e){return r.a.createElement("option",{value:e},e)})))),r.a.createElement("div",{id:"gm-container",className:"map-container"},r.a.createElement("p",null,"Loading google maps")))};a(169);var m=function(e){var t=Object(u.c)((function(e){return e})),a=t.locations,c=t.selectedDecade,l=Object(n.useState)([]),o=Object(i.a)(l,2),s=o[0],m=o[1];return Object(n.useEffect)((function(){m(a.filter((function(e){return e.Year===c})))}),[a,c]),r.a.createElement("div",{className:"viz-table"},r.a.createElement("table",null,r.a.createElement("tr",null,["Asset Name","Business Category","Risk Rating","Risk Factors","Year"].map((function(e){return r.a.createElement("th",null,e)}))),s&&s.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e["Asset Name"]),r.a.createElement("td",null,e["Business Category"]),r.a.createElement("td",null,e["Risk Rating"]),r.a.createElement("td",null,r.a.createElement("p",{className:"risk-factor-col",title:e["Risk Factors"]},e["Risk Factors"])),r.a.createElement("td",null,e.Year))}))))},f=(a(170),a(2));var d=function(e){var t=Object(u.c)((function(e){return e})).locations,a=Object(n.useState)(""),c=Object(i.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),d=m[0],p=m[1];Object(n.useEffect)((function(){t&&t.length>0&&(o(t[0].Lat+","+t[0].Long),v(t[0].Lat+","+t[0].Long,"LatLong"))}),[t]);var v=function(e,a){var n=f.j("%Y"),r=[];t&&(r=(r=(r=t.filter((function(t){var n=!1;return"Asset"===a&&(n=t["Asset Name"]===e),"LatLong"===a&&(n=t.Lat===e.split(",")[0]||t.Long===e.split(",")[1]),n}))).map((function(e){return{asset:e["Asset Name"],lat:e.Lat,long:e.Long,year:e.Year,value:e["Risk Rating"]}}))).sort((function(e,t){return e.year===t.year?parseFloat(e.value)-parseFloat(t.value):parseInt(e.year)-parseInt(t.year)}))),r.forEach((function(e){e.year=n(e.year),e.value=+e.value}));var c=20,l=20,o=50,i=70,u=400-i-l,s=400-c-o;f.i(".viz-chart-container svg").remove();var m=f.h(".viz-chart-container").append("svg").attr("width",u+i+l).attr("height",s+c+o).append("g").attr("transform","translate(".concat(i,",     ").concat(c,")")),d=f.g().range([0,u]),p=f.f().range([s,0]);d.domain(f.c(r,(function(e){return e.year}))),p.domain([0,f.e(r,(function(e){return e.value}))]),m.append("g").attr("transform","translate(0, ".concat(s,")")).call(f.a(d)),m.append("g").call(f.b(p));var v=f.d().x((function(e){return d(e.year)})).y((function(e){return p(e.value)}));m.append("path").data([r]).attr("class","line").attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("d",v)};return r.a.createElement("div",{className:"viz-chart"},r.a.createElement("div",{className:"viz-chart-controls"},r.a.createElement("p",null," Latitude and Longitude: "),r.a.createElement("select",{value:l,onChange:function(e){o(e.currentTarget.value),v(e.currentTarget.value,"LatLong"),p("")}},r.a.createElement("option",{value:""},"Please select"),function(){var e=[];return t&&(e=t.map((function(e){return{Lat:e.Lat,Long:e.Long}}))),e}().map((function(e){return r.a.createElement("option",{value:e.Lat+","+e.Long},e.Lat+","+e.Long)}))),r.a.createElement("p",null,"Asset: "),r.a.createElement("select",{value:d,onChange:function(e){o(""),v(e.currentTarget.value,"Asset"),p(e.currentTarget.value)}},r.a.createElement("option",{value:""},"Please select"),function(){var e=[];return t&&(e=t.map((function(e){return e["Asset Name"]}))),e}().map((function(e){return r.a.createElement("option",{value:e},e)})))),r.a.createElement("div",{className:"viz-chart-container"}))},p=a(43),v=a(12),g={locations:[],selectedDecade:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_LOCATIONS":return Object(v.a)(Object(v.a)({},e),{},{locations:t.payload});case"SET_SELECTED_DECADE":return Object(v.a)(Object(v.a)({},e),{},{selectedDecade:t.payload});default:return e}},h=Object(p.a)(E);var L=function(){return r.a.createElement(u.a,{store:h},r.a.createElement("div",{className:"app"},r.a.createElement("h1",{className:"header-title"},"Risk Viz"),r.a.createElement("main",null,r.a.createElement("div",{className:"cmp-sec"},r.a.createElement(s,null)),r.a.createElement("div",{className:"cmp-sec"},r.a.createElement(m,null)),r.a.createElement("div",{className:"cmp-sec"},r.a.createElement(d,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[154,1,2]]]);
//# sourceMappingURL=main.bc6de9ba.chunk.js.map